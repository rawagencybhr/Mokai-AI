"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/instagram/webhook/route";
exports.ids = ["app/api/instagram/webhook/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "dns":
/*!**********************!*\
  !*** external "dns" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("dns");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "http2":
/*!************************!*\
  !*** external "http2" ***!
  \************************/
/***/ ((module) => {

module.exports = require("http2");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("net");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "process":
/*!**************************!*\
  !*** external "process" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("process");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Finstagram%2Fwebhook%2Froute&page=%2Fapi%2Finstagram%2Fwebhook%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Finstagram%2Fwebhook%2Froute.ts&appDir=C%3A%5CUsers%5CAbdulla%20Alshameeri%5CDocuments%5CGitHub%5CMokai-AI%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CAbdulla%20Alshameeri%5CDocuments%5CGitHub%5CMokai-AI&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Finstagram%2Fwebhook%2Froute&page=%2Fapi%2Finstagram%2Fwebhook%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Finstagram%2Fwebhook%2Froute.ts&appDir=C%3A%5CUsers%5CAbdulla%20Alshameeri%5CDocuments%5CGitHub%5CMokai-AI%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CAbdulla%20Alshameeri%5CDocuments%5CGitHub%5CMokai-AI&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_Abdulla_Alshameeri_Documents_GitHub_Mokai_AI_app_api_instagram_webhook_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/instagram/webhook/route.ts */ \"(rsc)/./app/api/instagram/webhook/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/instagram/webhook/route\",\n        pathname: \"/api/instagram/webhook\",\n        filename: \"route\",\n        bundlePath: \"app/api/instagram/webhook/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\Abdulla Alshameeri\\\\Documents\\\\GitHub\\\\Mokai-AI\\\\app\\\\api\\\\instagram\\\\webhook\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_Abdulla_Alshameeri_Documents_GitHub_Mokai_AI_app_api_instagram_webhook_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/instagram/webhook/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZpbnN0YWdyYW0lMkZ3ZWJob29rJTJGcm91dGUmcGFnZT0lMkZhcGklMkZpbnN0YWdyYW0lMkZ3ZWJob29rJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGaW5zdGFncmFtJTJGd2ViaG9vayUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNBYmR1bGxhJTIwQWxzaGFtZWVyaSU1Q0RvY3VtZW50cyU1Q0dpdEh1YiU1Q01va2FpLUFJJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1DJTNBJTVDVXNlcnMlNUNBYmR1bGxhJTIwQWxzaGFtZWVyaSU1Q0RvY3VtZW50cyU1Q0dpdEh1YiU1Q01va2FpLUFJJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNrRDtBQUMvSDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL3Jhd2JvdC1wbGF0Zm9ybS8/ZGU3MCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJDOlxcXFxVc2Vyc1xcXFxBYmR1bGxhIEFsc2hhbWVlcmlcXFxcRG9jdW1lbnRzXFxcXEdpdEh1YlxcXFxNb2thaS1BSVxcXFxhcHBcXFxcYXBpXFxcXGluc3RhZ3JhbVxcXFx3ZWJob29rXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9pbnN0YWdyYW0vd2ViaG9vay9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2luc3RhZ3JhbS93ZWJob29rXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9pbnN0YWdyYW0vd2ViaG9vay9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXFVzZXJzXFxcXEFiZHVsbGEgQWxzaGFtZWVyaVxcXFxEb2N1bWVudHNcXFxcR2l0SHViXFxcXE1va2FpLUFJXFxcXGFwcFxcXFxhcGlcXFxcaW5zdGFncmFtXFxcXHdlYmhvb2tcXFxccm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL2luc3RhZ3JhbS93ZWJob29rL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Finstagram%2Fwebhook%2Froute&page=%2Fapi%2Finstagram%2Fwebhook%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Finstagram%2Fwebhook%2Froute.ts&appDir=C%3A%5CUsers%5CAbdulla%20Alshameeri%5CDocuments%5CGitHub%5CMokai-AI%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CAbdulla%20Alshameeri%5CDocuments%5CGitHub%5CMokai-AI&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/instagram/webhook/route.ts":
/*!********************************************!*\
  !*** ./app/api/instagram/webhook/route.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! firebase/firestore */ \"(rsc)/./node_modules/firebase/firestore/dist/index.mjs\");\n/* harmony import */ var _lib_firebase__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/firebase */ \"(rsc)/./lib/firebase.ts\");\n/* harmony import */ var _lib_gemini__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/gemini */ \"(rsc)/./lib/gemini.ts\");\n/* harmony import */ var _lib_meta__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/meta */ \"(rsc)/./lib/meta.ts\");\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/constants */ \"(rsc)/./constants.ts\");\n\n\n\n\n\n\n// Verification (GET)\nasync function GET(req) {\n    const { searchParams } = new URL(req.url);\n    const mode = searchParams.get(\"hub.mode\");\n    const token = searchParams.get(\"hub.verify_token\");\n    const challenge = searchParams.get(\"hub.challenge\");\n    if (mode === \"subscribe\" && token === process.env.INSTAGRAM_VERIFY_TOKEN) {\n        return new Response(challenge, {\n            status: 200,\n            headers: {\n                \"Content-Type\": \"text/plain\"\n            }\n        });\n    }\n    return new Response(\"Forbidden\", {\n        status: 403\n    });\n}\n// Events (POST)\nasync function POST(req) {\n    try {\n        const body = await req.json();\n        if (body.object === \"instagram\") {\n            for (const entry of body.entry){\n                if (entry.messaging) {\n                    for (const event of entry.messaging){\n                        await processInstagramEvent(event);\n                    }\n                }\n            }\n            return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(\"EVENT_RECEIVED\", {\n                status: 200\n            });\n        }\n        return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(\"Not Found\", {\n            status: 404\n        });\n    } catch (error) {\n        console.error(\"Webhook Error:\", error);\n        return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(\"Internal Error\", {\n            status: 500\n        });\n    }\n}\nasync function processInstagramEvent(event) {\n    const senderId = event.sender.id;\n    const recipientId = event.recipient.id; // Instagram Business ID\n    const messageText = event.message?.text;\n    if (!messageText) return;\n    // 1. Find Bot by Instagram Business ID\n    const botsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.collection)(_lib_firebase__WEBPACK_IMPORTED_MODULE_2__.db, \"bots\");\n    const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.query)(botsRef, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.where)(\"instagramBusinessId\", \"==\", recipientId));\n    const querySnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.getDocs)(q);\n    if (querySnapshot.empty) return;\n    const botDoc = querySnapshot.docs[0];\n    const bot = botDoc.data();\n    if (!bot.isActive) return;\n    // 2. Generate Reply\n    const systemInstruction = (0,_constants__WEBPACK_IMPORTED_MODULE_5__.GENERATE_SYSTEM_INSTRUCTION)(bot, \"\", undefined, -1);\n    try {\n        const model = (0,_lib_gemini__WEBPACK_IMPORTED_MODULE_3__.getModel)();\n        const result = await model.generateContent([\n            {\n                text: systemInstruction\n            },\n            {\n                text: messageText\n            }\n        ]);\n        const replyText = result.response.text();\n        if (!replyText) return;\n        // 3. Send Reply\n        if (bot.instagramAccessToken) {\n            await (0,_lib_meta__WEBPACK_IMPORTED_MODULE_4__.sendInstagramMessage)(bot.instagramBusinessId, senderId, replyText, bot.instagramAccessToken);\n        }\n    } catch (error) {\n        console.error(\"Gemini Error:\", error);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2luc3RhZ3JhbS93ZWJob29rL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQXdEO0FBQ2U7QUFDbkM7QUFDZ0I7QUFDRjtBQUNRO0FBRzFELHFCQUFxQjtBQUNkLGVBQWVTLElBQUlDLEdBQWdCO0lBQ3hDLE1BQU0sRUFBRUMsWUFBWSxFQUFFLEdBQUcsSUFBSUMsSUFBSUYsSUFBSUcsR0FBRztJQUN4QyxNQUFNQyxPQUFPSCxhQUFhSSxHQUFHLENBQUM7SUFDOUIsTUFBTUMsUUFBUUwsYUFBYUksR0FBRyxDQUFDO0lBQy9CLE1BQU1FLFlBQVlOLGFBQWFJLEdBQUcsQ0FBQztJQUVuQyxJQUFJRCxTQUFTLGVBQWVFLFVBQVVFLFFBQVFDLEdBQUcsQ0FBQ0Msc0JBQXNCLEVBQUc7UUFDekUsT0FBTyxJQUFJQyxTQUFVSixXQUFXO1lBQzlCSyxRQUFRO1lBQ1JDLFNBQVM7Z0JBQUUsZ0JBQWdCO1lBQWM7UUFDM0M7SUFDRjtJQUVBLE9BQU8sSUFBSUYsU0FBUyxhQUFhO1FBQUVDLFFBQVE7SUFBSztBQUNsRDtBQUVBLGdCQUFnQjtBQUNULGVBQWVFLEtBQUtkLEdBQWdCO0lBQ3pDLElBQUk7UUFDRixNQUFNZSxPQUFPLE1BQU1mLElBQUlnQixJQUFJO1FBRTNCLElBQUlELEtBQUtFLE1BQU0sS0FBSyxhQUFhO1lBQy9CLEtBQUssTUFBTUMsU0FBU0gsS0FBS0csS0FBSyxDQUFFO2dCQUM5QixJQUFJQSxNQUFNQyxTQUFTLEVBQUU7b0JBQ25CLEtBQUssTUFBTUMsU0FBU0YsTUFBTUMsU0FBUyxDQUFFO3dCQUNsQyxNQUFNRSxzQkFBc0JEO29CQUMvQjtnQkFDRjtZQUNGO1lBQ0EsT0FBTyxJQUFJOUIscURBQVlBLENBQUMsa0JBQWtCO2dCQUFFc0IsUUFBUTtZQUFJO1FBQzFEO1FBQ0EsT0FBTyxJQUFJdEIscURBQVlBLENBQUMsYUFBYTtZQUFFc0IsUUFBUTtRQUFJO0lBQ3JELEVBQUUsT0FBT1UsT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsa0JBQWtCQTtRQUNoQyxPQUFPLElBQUloQyxxREFBWUEsQ0FBQyxrQkFBa0I7WUFBRXNCLFFBQVE7UUFBSTtJQUMxRDtBQUNGO0FBRUEsZUFBZVMsc0JBQXNCRCxLQUFVO0lBQzdDLE1BQU1JLFdBQVdKLE1BQU1LLE1BQU0sQ0FBQ0MsRUFBRTtJQUNoQyxNQUFNQyxjQUFjUCxNQUFNUSxTQUFTLENBQUNGLEVBQUUsRUFBRSx3QkFBd0I7SUFDaEUsTUFBTUcsY0FBY1QsTUFBTVUsT0FBTyxFQUFFQztJQUVuQyxJQUFJLENBQUNGLGFBQWE7SUFFbEIsdUNBQXVDO0lBQ3ZDLE1BQU1HLFVBQVV6Qyw4REFBVUEsQ0FBQ0ksNkNBQUVBLEVBQUU7SUFDL0IsTUFBTXNDLElBQUl6Qyx5REFBS0EsQ0FBQ3dDLFNBQVN2Qyx5REFBS0EsQ0FBQyx1QkFBdUIsTUFBTWtDO0lBQzVELE1BQU1PLGdCQUFnQixNQUFNeEMsMkRBQU9BLENBQUN1QztJQUVwQyxJQUFJQyxjQUFjQyxLQUFLLEVBQUU7SUFFekIsTUFBTUMsU0FBU0YsY0FBY0csSUFBSSxDQUFDLEVBQUU7SUFDcEMsTUFBTUMsTUFBTUYsT0FBT0csSUFBSTtJQUV2QixJQUFJLENBQUNELElBQUlFLFFBQVEsRUFBRTtJQUVuQixvQkFBb0I7SUFDcEIsTUFBTUMsb0JBQW9CM0MsdUVBQTJCQSxDQUFDd0MsS0FBSyxJQUFJSSxXQUFXLENBQUM7SUFFM0UsSUFBSTtRQUNGLE1BQU1DLFFBQVEvQyxxREFBUUE7UUFDdEIsTUFBTWdELFNBQVMsTUFBTUQsTUFBTUUsZUFBZSxDQUFDO1lBQ3pDO2dCQUFFZCxNQUFNVTtZQUFrQjtZQUMxQjtnQkFBRVYsTUFBTUY7WUFBWTtTQUNyQjtRQUNELE1BQU1pQixZQUFZRixPQUFPRyxRQUFRLENBQUNoQixJQUFJO1FBQ3RDLElBQUksQ0FBQ2UsV0FBVztRQUVoQixnQkFBZ0I7UUFDaEIsSUFBSVIsSUFBSVUsb0JBQW9CLEVBQUU7WUFDMUIsTUFBTW5ELCtEQUFvQkEsQ0FBQ3lDLElBQUlXLG1CQUFtQixFQUFHekIsVUFBVXNCLFdBQVdSLElBQUlVLG9CQUFvQjtRQUN0RztJQUNGLEVBQUUsT0FBTzFCLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLGlCQUFpQkE7SUFDakM7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3Jhd2JvdC1wbGF0Zm9ybS8uL2FwcC9hcGkvaW5zdGFncmFtL3dlYmhvb2svcm91dGUudHM/N2RlYiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xuaW1wb3J0IHsgY29sbGVjdGlvbiwgcXVlcnksIHdoZXJlLCBnZXREb2NzIH0gZnJvbSAnZmlyZWJhc2UvZmlyZXN0b3JlJztcclxuaW1wb3J0IHsgZGIgfSBmcm9tICdAL2xpYi9maXJlYmFzZSc7XHJcbmltcG9ydCB7IGdldE1vZGVsLCBNT0RFTF9OQU1FIH0gZnJvbSAnQC9saWIvZ2VtaW5pJztcclxuaW1wb3J0IHsgc2VuZEluc3RhZ3JhbU1lc3NhZ2UgfSBmcm9tICdAL2xpYi9tZXRhJztcclxuaW1wb3J0IHsgR0VORVJBVEVfU1lTVEVNX0lOU1RSVUNUSU9OIH0gZnJvbSAnQC9jb25zdGFudHMnO1xyXG5pbXBvcnQgeyBCb3RDb25maWcgfSBmcm9tICdAL3R5cGVzJztcclxuXHJcbi8vIFZlcmlmaWNhdGlvbiAoR0VUKVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcTogTmV4dFJlcXVlc3QgKSB7IFxuICBjb25zdCB7IHNlYXJjaFBhcmFtcyB9ID0gbmV3IFVSTChyZXEudXJsICk7IFxuICBjb25zdCBtb2RlID0gc2VhcmNoUGFyYW1zLmdldChcImh1Yi5tb2RlXCIgKTsgXG4gIGNvbnN0IHRva2VuID0gc2VhcmNoUGFyYW1zLmdldChcImh1Yi52ZXJpZnlfdG9rZW5cIiApOyBcbiAgY29uc3QgY2hhbGxlbmdlID0gc2VhcmNoUGFyYW1zLmdldChcImh1Yi5jaGFsbGVuZ2VcIiApOyBcblxuICBpZiAobW9kZSA9PT0gXCJzdWJzY3JpYmVcIiAmJiB0b2tlbiA9PT0gcHJvY2Vzcy5lbnYuSU5TVEFHUkFNX1ZFUklGWV9UT0tFTiApIHsgXG4gICAgcmV0dXJuIG5ldyBSZXNwb25zZSAoY2hhbGxlbmdlLCB7IFxuICAgICAgc3RhdHVzOiAyMDAgLCBcbiAgICAgIGhlYWRlcnM6IHsgXCJDb250ZW50LVR5cGVcIjogXCJ0ZXh0L3BsYWluXCIgIH0gXG4gICAgfSk7IFxuICB9IFxuXG4gIHJldHVybiBuZXcgUmVzcG9uc2UoXCJGb3JiaWRkZW5cIiwgeyBzdGF0dXM6IDQwMyAgfSk7IFxufSBcblxyXG4vLyBFdmVudHMgKFBPU1QpXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcTogTmV4dFJlcXVlc3QpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgYm9keSA9IGF3YWl0IHJlcS5qc29uKCk7XHJcblxyXG4gICAgaWYgKGJvZHkub2JqZWN0ID09PSAnaW5zdGFncmFtJykge1xyXG4gICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIGJvZHkuZW50cnkpIHtcclxuICAgICAgICBpZiAoZW50cnkubWVzc2FnaW5nKSB7XHJcbiAgICAgICAgICBmb3IgKGNvbnN0IGV2ZW50IG9mIGVudHJ5Lm1lc3NhZ2luZykge1xyXG4gICAgICAgICAgICAgYXdhaXQgcHJvY2Vzc0luc3RhZ3JhbUV2ZW50KGV2ZW50KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIG5ldyBOZXh0UmVzcG9uc2UoJ0VWRU5UX1JFQ0VJVkVEJywgeyBzdGF0dXM6IDIwMCB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiBuZXcgTmV4dFJlc3BvbnNlKCdOb3QgRm91bmQnLCB7IHN0YXR1czogNDA0IH0pO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdXZWJob29rIEVycm9yOicsIGVycm9yKTtcclxuICAgIHJldHVybiBuZXcgTmV4dFJlc3BvbnNlKCdJbnRlcm5hbCBFcnJvcicsIHsgc3RhdHVzOiA1MDAgfSk7XHJcbiAgfVxyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBwcm9jZXNzSW5zdGFncmFtRXZlbnQoZXZlbnQ6IGFueSkge1xyXG4gIGNvbnN0IHNlbmRlcklkID0gZXZlbnQuc2VuZGVyLmlkO1xyXG4gIGNvbnN0IHJlY2lwaWVudElkID0gZXZlbnQucmVjaXBpZW50LmlkOyAvLyBJbnN0YWdyYW0gQnVzaW5lc3MgSURcclxuICBjb25zdCBtZXNzYWdlVGV4dCA9IGV2ZW50Lm1lc3NhZ2U/LnRleHQ7XHJcblxyXG4gIGlmICghbWVzc2FnZVRleHQpIHJldHVybjtcclxuXHJcbiAgLy8gMS4gRmluZCBCb3QgYnkgSW5zdGFncmFtIEJ1c2luZXNzIElEXHJcbiAgY29uc3QgYm90c1JlZiA9IGNvbGxlY3Rpb24oZGIsICdib3RzJyk7XHJcbiAgY29uc3QgcSA9IHF1ZXJ5KGJvdHNSZWYsIHdoZXJlKCdpbnN0YWdyYW1CdXNpbmVzc0lkJywgJz09JywgcmVjaXBpZW50SWQpKTtcclxuICBjb25zdCBxdWVyeVNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhxKTtcclxuXHJcbiAgaWYgKHF1ZXJ5U25hcHNob3QuZW1wdHkpIHJldHVybjtcclxuXHJcbiAgY29uc3QgYm90RG9jID0gcXVlcnlTbmFwc2hvdC5kb2NzWzBdO1xyXG4gIGNvbnN0IGJvdCA9IGJvdERvYy5kYXRhKCkgYXMgQm90Q29uZmlnO1xyXG5cclxuICBpZiAoIWJvdC5pc0FjdGl2ZSkgcmV0dXJuO1xyXG5cclxuICAvLyAyLiBHZW5lcmF0ZSBSZXBseVxyXG4gIGNvbnN0IHN5c3RlbUluc3RydWN0aW9uID0gR0VORVJBVEVfU1lTVEVNX0lOU1RSVUNUSU9OKGJvdCwgXCJcIiwgdW5kZWZpbmVkLCAtMSk7XHJcbiAgXHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IG1vZGVsID0gZ2V0TW9kZWwoKTtcclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG1vZGVsLmdlbmVyYXRlQ29udGVudChbXHJcbiAgICAgIHsgdGV4dDogc3lzdGVtSW5zdHJ1Y3Rpb24gfSxcclxuICAgICAgeyB0ZXh0OiBtZXNzYWdlVGV4dCB9XHJcbiAgICBdKTtcclxuICAgIGNvbnN0IHJlcGx5VGV4dCA9IHJlc3VsdC5yZXNwb25zZS50ZXh0KCk7XHJcbiAgICBpZiAoIXJlcGx5VGV4dCkgcmV0dXJuO1xyXG5cclxuICAgIC8vIDMuIFNlbmQgUmVwbHlcclxuICAgIGlmIChib3QuaW5zdGFncmFtQWNjZXNzVG9rZW4pIHtcclxuICAgICAgICBhd2FpdCBzZW5kSW5zdGFncmFtTWVzc2FnZShib3QuaW5zdGFncmFtQnVzaW5lc3NJZCEsIHNlbmRlcklkLCByZXBseVRleHQsIGJvdC5pbnN0YWdyYW1BY2Nlc3NUb2tlbik7XHJcbiAgICB9XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0dlbWluaSBFcnJvcjonLCBlcnJvcik7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJjb2xsZWN0aW9uIiwicXVlcnkiLCJ3aGVyZSIsImdldERvY3MiLCJkYiIsImdldE1vZGVsIiwic2VuZEluc3RhZ3JhbU1lc3NhZ2UiLCJHRU5FUkFURV9TWVNURU1fSU5TVFJVQ1RJT04iLCJHRVQiLCJyZXEiLCJzZWFyY2hQYXJhbXMiLCJVUkwiLCJ1cmwiLCJtb2RlIiwiZ2V0IiwidG9rZW4iLCJjaGFsbGVuZ2UiLCJwcm9jZXNzIiwiZW52IiwiSU5TVEFHUkFNX1ZFUklGWV9UT0tFTiIsIlJlc3BvbnNlIiwic3RhdHVzIiwiaGVhZGVycyIsIlBPU1QiLCJib2R5IiwianNvbiIsIm9iamVjdCIsImVudHJ5IiwibWVzc2FnaW5nIiwiZXZlbnQiLCJwcm9jZXNzSW5zdGFncmFtRXZlbnQiLCJlcnJvciIsImNvbnNvbGUiLCJzZW5kZXJJZCIsInNlbmRlciIsImlkIiwicmVjaXBpZW50SWQiLCJyZWNpcGllbnQiLCJtZXNzYWdlVGV4dCIsIm1lc3NhZ2UiLCJ0ZXh0IiwiYm90c1JlZiIsInEiLCJxdWVyeVNuYXBzaG90IiwiZW1wdHkiLCJib3REb2MiLCJkb2NzIiwiYm90IiwiZGF0YSIsImlzQWN0aXZlIiwic3lzdGVtSW5zdHJ1Y3Rpb24iLCJ1bmRlZmluZWQiLCJtb2RlbCIsInJlc3VsdCIsImdlbmVyYXRlQ29udGVudCIsInJlcGx5VGV4dCIsInJlc3BvbnNlIiwiaW5zdGFncmFtQWNjZXNzVG9rZW4iLCJpbnN0YWdyYW1CdXNpbmVzc0lkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/instagram/webhook/route.ts\n");

/***/ }),

/***/ "(rsc)/./constants.ts":
/*!**********************!*\
  !*** ./constants.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GENERATE_SYSTEM_INSTRUCTION: () => (/* binding */ GENERATE_SYSTEM_INSTRUCTION),\n/* harmony export */   MODEL_NAME: () => (/* binding */ MODEL_NAME)\n/* harmony export */ });\nconst getToneInstruction = (toneValue = 50)=>{\n    // Slider Logic:\n    // 0 - 25: Friendly / Casual (Left)\n    // 26 - 74: Salesman / Balanced (Middle)\n    // 75 - 100: Official / Formal (Right)\n    if (toneValue <= 25) {\n        return `ðŸŽ­ Ø§Ù„Ø£Ø³Ù„ÙˆØ¨ (ÙˆØ¯Ù‘ÙŠ Ø¬Ø¯Ø§Ù‹ - Ø®ÙˆÙŠ):\r\n    - ØªÙƒÙ„Ù… Ø¨Ø¹ÙÙˆÙŠØ© ØªØ§Ù…Ø© ÙˆÙƒØ£Ù†Ùƒ ØµØ¯ÙŠÙ‚ Ù„Ù„Ø¹Ù…ÙŠÙ„.\r\n    - Ø§Ø³ØªØ®Ø¯Ù… Ø¹Ø¨Ø§Ø±Ø§Øª Ù…Ø«Ù„: (Ù…Ù† Ø¹ÙŠÙˆÙ†ÙŠØŒ ÙˆÙ„Ø§ ÙŠÙ‡Ù…ÙƒØŒ Ø£Ø¨Ø´Ø± Ø¨Ø¹Ø²ÙƒØŒ ÙŠØ§ Ù‡Ù„Ø§ ÙˆØ§Ù„Ù„Ù‡).\r\n    - ÙƒÙ† Ù…Ø±Ù†Ø§Ù‹ ÙˆØ¨Ø³ÙŠØ·Ø§Ù‹ Ø¬Ø¯Ø§Ù‹ ÙÙŠ Ø§Ù„ÙƒÙ„Ø§Ù….`;\n    } else if (toneValue >= 75) {\n        return `ðŸŽ­ Ø§Ù„Ø£Ø³Ù„ÙˆØ¨ (Ø±Ø³Ù…ÙŠ Ø¬Ø¯Ø§Ù‹):\r\n    - ØªÙƒÙ„Ù… Ø¨Ø§Ø­ØªØ±Ø§ÙÙŠØ© Ø¹Ø§Ù„ÙŠØ© ÙˆØ§Ø­ØªØ±Ø§Ù… Ø¨Ø§Ù„Øº.\r\n    - Ø§Ø³ØªØ®Ø¯Ù… Ø¹Ø¨Ø§Ø±Ø§Øª Ù…Ø«Ù„: (Ø­Ø¶Ø±ØªÙƒØŒ Ø·Ø§Ù„ Ø¹Ù…Ø±ÙƒØŒ ÙŠØ³Ø¹Ø¯Ù†Ø§ Ø®Ø¯Ù…ØªÙƒÙ…).\r\n    - ØªØ¬Ù†Ø¨ Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ø¹Ø§Ù…ÙŠØ© Ø§Ù„Ù…ÙØ±Ø·Ø©ØŒ ÙƒÙ† Ø¯Ù‚ÙŠÙ‚Ø§Ù‹ ÙˆÙ…ÙˆØ¬Ø²Ø§Ù‹.`;\n    } else {\n        // Default (Salesman)\n        return `ðŸŽ­ Ø§Ù„Ø£Ø³Ù„ÙˆØ¨ (Ø¨Ø§Ø¦Ø¹ Ù…Ø­ØªØ±Ù - Ù…ØªÙˆØ§Ø²Ù†):\r\n    - Ø®Ù„ÙŠØ· Ø¨ÙŠÙ† Ø§Ù„Ø§Ø­ØªØ±Ø§Ù… ÙˆØ§Ù„ÙˆØ¯.\r\n    - Ø§Ø³ØªØ®Ø¯Ù… (ÙŠØ§ ØºØ§Ù„ÙŠØŒ Ø£Ø¨Ø´Ø±ØŒ ØªÙ…Ø§Ù…).\r\n    - Ø±ÙƒØ² Ø¹Ù„Ù‰ Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø¨ÙŠØ¹Ø© Ø¨Ø°ÙƒØ§Ø¡ ÙˆØ¨Ø¯ÙˆÙ† ØªÙƒÙ„Ù.`;\n    }\n};\nconst getLanguageInstruction = (lang)=>{\n    if (lang === \"en\") {\n        return `ðŸŒ **Language Rule:** You MUST reply in ENGLISH ONLY. Even if the user speaks Arabic, reply in professional English.`;\n    } else if (lang === \"bi\") {\n        return `ðŸŒ **Language Rule:** You are BILINGUAL. \r\n    - If the user speaks Arabic, reply in Arabic (Khaleeji dialect).\r\n    - If the user speaks English, reply in English.\r\n    - Match the user's language immediately.`;\n    } else {\n        return `ðŸŒ **Language Rule:** Ù„ØºØªÙƒ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ù‡ÙŠ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© (Ø§Ù„Ù„Ù‡Ø¬Ø© Ø§Ù„Ø®Ù„ÙŠØ¬ÙŠØ© Ø§Ù„Ø¨ÙŠØ¶Ø§Ø¡/Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©).`;\n    }\n};\nconst GENERATE_SYSTEM_INSTRUCTION = (bot, dynamicContext, userProfile, timeSinceLastMsgHours = -1 // -1 means new session/first message\n)=>{\n    // Logic for Greetings & Continuity\n    let greetingLogic = \"\";\n    // Time Logic Rules\n    if (timeSinceLastMsgHours === -1) {\n        // First interaction ever (or cleared chat)\n        greetingLogic = `1ï¸âƒ£ **Ø§Ù„ØªØ­ÙŠØ© ÙˆØ§Ù„ØªØ¹Ø±ÙŠÙ (Ø£ÙˆÙ„ Ø±Ø³Ø§Ù„Ø© ÙÙ‚Ø·):**\r\n     - Ø§Ø¨Ø¯Ø£ Ø¨Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø§ÙØªØªØ§Ø­ÙŠØ© Ø§Ù„Ø¥Ø¬Ø¨Ø§Ø±ÙŠØ©: \"Ø­ÙŠØ§Ùƒ Ø§Ù„Ù„Ù‡ ðŸ‘‹ Ø£Ù†Ø§ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒÙŠØŒ Ø§Ø³Ù…ÙŠ ${bot.botName}..\".\r\n     - Ø¨Ø¹Ø¯Ù‡Ø§ Ù…Ø¨Ø§Ø´Ø±Ø© Ø¬Ø§ÙˆØ¨ Ø¹Ù„Ù‰ Ø§Ø³ØªÙØ³Ø§Ø±Ù‡.`;\n    } else if (timeSinceLastMsgHours > 48) {\n        // Returning user after 48h\n        greetingLogic = `1ï¸âƒ£ **Ø§Ù„Ø°Ø§ÙƒØ±Ø© (Ø¹ÙˆØ¯Ø© Ø¹Ù…ÙŠÙ„ Ø¨Ø¹Ø¯ ÙØªØ±Ø©):**\r\n     - Ø§Ù„Ø¹Ù…ÙŠÙ„ ØºØ§Ø¨ Ø£ÙƒØ«Ø± Ù…Ù† 48 Ø³Ø§Ø¹Ø© ÙˆØ±Ø¬Ø¹.\r\n     - Ø±Ø­Ø¨ Ø¨Ù‡ ØªØ±Ø­ÙŠØ¨ \"Ø§Ù„Ø¹Ø§Ø¦Ø¯\" (ÙŠØ§ Ù‡Ù„Ø§ ÙÙŠÙƒ Ù…Ø±Ø© Ø«Ø§Ù†ÙŠØ©ØŒ Ù†ÙˆØ±ØªÙ†Ø§..ØŒ Ø­ÙŠØ§Ùƒ Ø§Ù„Ù„Ù‡ Ù…Ù† Ø¬Ø¯ÙŠØ¯).\r\n     - ðŸš« **Ù…Ù…Ù†ÙˆØ¹ ØªØ¹Ø±Ù Ø¨Ù†ÙØ³Ùƒ Ø£Ø¨Ø¯Ø§Ù‹**. Ù‡Ùˆ ÙŠØ¹Ø±ÙÙƒ. Ù„Ø§ ØªØªØ¹Ø§Ù…Ù„ ÙƒØ£Ù†Ùƒ ØºØ±ÙŠØ¨.\r\n     - Ø§Ø¯Ø®Ù„ ÙÙŠ Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹ Ù…Ø¨Ø§Ø´Ø±Ø©.`;\n    } else {\n        // Active conversation (less than 48h)\n        greetingLogic = `1ï¸âƒ£ **Ø§Ù„Ø³ÙŠØ§Ù‚ (Ù…Ø­Ø§Ø¯Ø«Ø© Ù…Ø³ØªÙ…Ø±Ø©):**\r\n     - ðŸš« **Ù…Ù…Ù†ÙˆØ¹ Ø§Ù„ØªØ­ÙŠØ©** (Ù„Ø§ ØªÙ‚Ù„ Ù‡Ù„Ø§ØŒ ÙˆÙ„Ø§ Ø³Ù„Ø§Ù…ØŒ ÙˆÙ„Ø§ Ù…Ø±Ø­Ø¨Ø§Ù‹).\r\n     - ðŸš« **Ù…Ù…Ù†ÙˆØ¹ Ø§Ù„ØªØ¹Ø±ÙŠÙ Ø¨Ù†ÙØ³Ùƒ**.\r\n     - Ø§Ø¹ØªØ¨Ø± Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ© ØªÙƒÙ…Ù„Ø© Ù„Ù„Ø¬Ù…Ù„Ø© Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©. Ø¬Ø§ÙˆØ¨ ÙÙˆØ±Ø§Ù‹ Ø¨Ø¯ÙˆÙ† Ø£ÙŠ Ù…Ù‚Ø¯Ù…Ø§Øª.\r\n     - ÙƒÙ† Ø¹Ù…Ù„ÙŠØ§Ù‹ Ø¬Ø¯Ø§Ù‹.`;\n    }\n    return `\r\nØ£Ù†Øª \"${bot.botName}\"ØŒ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒÙŠ Ø§Ù„Ø®Ø§Øµ Ø¨Ù€ (${bot.storeName}).\r\nØµÙØªÙƒ: Ø°ÙƒÙŠØŒ Ù„Ù…Ø§Ø­ØŒ Ù…Ø­ØªØ±Ù.\r\n\r\n${getLanguageInstruction(bot.language)}\r\n\r\nØ§Ù„Ù…ØµØ§Ø¯Ø± Ø§Ù„ÙˆØ­ÙŠØ¯Ø© Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§ØªÙƒ:\r\n- Ø§Ù„Ù†Ø´Ø§Ø·: ${bot.businessType}\r\n- Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª: ${bot.products}\r\n- Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø¹Ù…Ù„: ${bot.workHours}\r\n- Ø§Ù„Ù…ÙˆÙ‚Ø¹: ${bot.location}\r\n- Ù…Ù„Ø§Ø­Ø¸Ø§Øª: ${bot.additionalInfo}\r\n- ØªØ­Ø¯ÙŠØ«Ø§Øª ÙÙˆØ±ÙŠØ© Ù…Ù† Ø§Ù„Ù…Ø§Ù„Ùƒ: ${dynamicContext || \"Ù„Ø§ ÙŠÙˆØ¬Ø¯\"}\r\n- Ø§Ù„Ø°Ø§ÙƒØ±Ø© Ø§Ù„Ù…ÙƒØªØ³Ø¨Ø©: ${bot.learnedObservations && bot.learnedObservations.length > 0 ? bot.learnedObservations.join(\" | \") : \"Ù„Ø§ ÙŠÙˆØ¬Ø¯\"}\r\n\r\n---\r\n\r\nâš¡ **Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ø±Ø¯ Ø§Ù„Ø°ÙƒÙŠ (Ø§Ù„Ø¨Ø±ÙˆØªÙˆÙƒÙˆÙ„ Ø§Ù„ØµØ§Ø±Ù…):**\r\nÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø±Ø¯Ùƒ Ø¯Ø§Ø¦Ù…Ø§Ù‹ ÙÙŠ \"Ø±Ø³Ø§Ù„Ø© ÙˆØ§Ø­Ø¯Ø© ÙÙ‚Ø·\" ÙˆÙ…ØªØ±Ø§Ø¨Ø·Ø©.\r\n\r\n${greetingLogic}\r\n\r\n2ï¸âƒ£ **Ø­Ø¬Ù… Ø§Ù„Ø±Ø¯ (Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø¨Ù„Ø§ØºÙŠ):**\r\n   - **Ù‚Ø§Ø¹Ø¯Ø© Ø°Ù‡Ø¨ÙŠØ©:** Ø§Ù„Ø±Ø¯ Ø¹Ù„Ù‰ Ù‚Ø¯Ø± Ø§Ù„Ø³Ø¤Ø§Ù„.\r\n   - Ø¥Ø°Ø§ Ø³Ø£Ù„ Ø³Ø¤Ø§Ù„ Ù‚ØµÙŠØ± (Ø¨ÙƒÙ…ØŸ ÙˆÙŠÙ†ÙƒÙ…ØŸ) -> Ø¬Ø§ÙˆØ¨ Ø¨ÙƒÙ„Ù…ØªÙŠÙ† ÙˆØ¨Ø³. (Ù…Ø«Ø§Ù„: \"Ø¨Ù€ 50 Ø±ÙŠØ§Ù„ Ø·Ø§Ù„ Ø¹Ù…Ø±Ùƒ\"). Ù„Ø§ ØªØ³Ø±Ø¯ Ù‚ØµØ§Ø¦Ø¯.\r\n   - Ø¥Ø°Ø§ Ø³Ø£Ù„ ØªÙØ§ØµÙŠÙ„ Ø¯Ù‚ÙŠÙ‚Ø© -> Ø¬Ø§ÙˆØ¨ Ø¨ØªÙØµÙŠÙ„ ÙˆØ§ÙÙŠ ÙˆÙ…Ø±ØªØ¨.\r\n   - Ù„Ø§ ØªÙƒÙ† Ø¬Ø§ÙØ§Ù‹ØŒ ÙˆÙ„Ø§ Ø«Ø±Ø«Ø§Ø±Ø§Ù‹. ÙƒÙ† \"Ø¨Ø§Ø¦Ø¹ Ù…Ø­ØªØ±Ù\" ÙŠØ¹Ø±Ù Ù‚ÙŠÙ…Ø© Ø§Ù„ÙˆÙ‚Øª.\r\n\r\n3ï¸âƒ£ **Ø§Ù„Ù‚Ø±Ø§Ø± Ø§Ù„Ø°ÙƒÙŠ (Ø§Ù„Ø±Ø¯):**\r\n   - **Ø§Ù„Ø­Ø§Ù„Ø© Ø£ (Ø³Ø¤Ø§Ù„ ÙˆØ§Ø¶Ø­):** Ø¬Ø§ÙˆØ¨ Ù…Ø¨Ø§Ø´Ø±Ø© Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª.\r\n   - **Ø§Ù„Ø­Ø§Ù„Ø© Ø¨ (ØµÙˆØ±Ø©/ØºÙ…ÙˆØ¶):** Ù‚Ù„ \"ÙˆØµÙ„ØªÙ†ÙŠ Ø§Ù„ØµÙˆØ±Ø©.. ØªÙØ¶Ù„ ÙˆØ´ Ø­Ø§Ø¨ ØªØ³ØªÙØ³Ø± Ø¹Ù†Ù‡ØŸ\".\r\n\r\n4ï¸âƒ£ **Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© Ø§Ù„Ø¥ØºÙ„Ø§Ù‚ (Sales Handoff Strategy):**\r\n   - Ø£Ù†Øª Ù…Ø³Ø§Ø¹Ø¯ Ù…Ø¨ÙŠØ¹Ø§Øª ÙˆÙ„Ø³Øª \"Ø§Ù„ÙƒØ§Ø´ÙŠØ±\".\r\n   - **Ø§Ù„Ù‡Ø¯Ù:** Ø¥ÙŠØµØ§Ù„ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø´Ø±Ø§Ø¡ Ø«Ù… ØªØ³Ù„ÙŠÙ…Ù‡ Ù„Ù„Ù…Ø§Ù„Ùƒ.\r\n   - **Ù…ØªÙ‰ ØªØ­ÙˆÙ„ Ø§Ù„Ø¹Ù…ÙŠÙ„ØŸ** Ø¥Ø°Ø§ Ø´Ø¹Ø±Øª Ø£Ù† Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø¬Ø§Ø¯ (ÙˆØ§ÙÙ‚ Ø¹Ù„Ù‰ Ø§Ù„Ø³Ø¹Ø±ØŒ Ù‚Ø§Ù„ \"ØªÙ…\"ØŒ Ø³Ø£Ù„ \"ÙƒÙŠÙ Ø£Ø¯ÙØ¹\"ØŒ Ø£Ùˆ Ø£Ø¨Ø¯Ù‰ Ø±ØºØ¨Ø© Ù…Ø¤ÙƒØ¯Ø© Ù„Ù„Ø´Ø±Ø§Ø¡).\r\n   - **ÙƒÙŠÙ ØªØªØµØ±ÙØŸ** Ù„Ø§ ØªØªØµØ±Ù Ù…Ù† ØªÙ„Ù‚Ø§Ø¡ Ù†ÙØ³Ùƒ. Ø£Ù‚Ù†Ø¹Ù‡ Ø¨Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ù‚Ù„ÙŠÙ„Ø§Ù‹.\r\n   - **Ø§Ù„Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ Ø§Ù„Ø¥Ø¬Ø¨Ø§Ø±ÙŠ:** Ù‚Ù„ Ù„Ù‡ Ø¬Ù…Ù„Ø© Ø¨Ù…Ø¹Ù†Ø§Ù‡Ø§: \"Ø§Ø®ØªÙŠØ§Ø± Ù…Ù…ØªØ§Ø²! Ø¹Ø´Ø§Ù† Ù†Ø®Ø¯Ù…Ùƒ ÙˆÙ†ØªÙ…Ù… Ø§Ù„Ø·Ù„Ø¨ Ø¨Ø³Ø±Ø¹Ø©ØŒ Ø¨Ø­ÙˆÙ„Ùƒ Ø§Ù„Ø¢Ù† Ù„Ù„Ù…Ø§Ù„Ùƒ/Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ ÙŠÙƒÙ…Ù„ Ù…Ø¹Ø§Ùƒ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø­Ø§Ù„Ø§Ù‹.\"\r\n   - Ø«Ù… Ø§Ø®ØªÙ… Ø§Ù„Ø±Ø¯ Ø¨Ù€ Ø§Ù„Ø±Ù…Ø²: [[REQ_HANDOFF]]\r\n   - Ù‡Ø°Ø§ Ø§Ù„Ø±Ù…Ø² Ø³ÙŠØ·Ù„Ù‚ Ø¬Ø±Ø³ Ø¹Ù†Ø¯ Ø§Ù„Ù…Ø§Ù„Ùƒ Ù„ÙŠØ¯Ø®Ù„ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©.\r\n\r\n---\r\n\r\nðŸš« **Ù…Ù…Ù†ÙˆØ¹Ø§Øª:**\r\n- Ù„Ø§ ØªÙƒØ±Ø± Ø§Ù„ØªØ¹Ø±ÙŠÙ Ø¨Ù†ÙØ³Ùƒ Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹ Ø¨Ø¹Ø¯ Ø§Ù„Ù…Ø±Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰.\r\n- Ù„Ø§ ØªØ·Ù„Ø¨ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø¥Ø±Ø³Ø§Ù„.\r\n- Ù„Ø§ ØªØ®ØªØ±Ø¹ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª.\r\n\r\n${getToneInstruction(bot.toneValue)}\r\n\r\nðŸ•µï¸ **ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¹Ù…ÙŠÙ„:**\r\nØ§Ù„Ø¹Ù…ÙŠÙ„: ${userProfile?.fullName || \"ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ\"}. Ø·Ø§Ø¨Ù‚ Ø£Ø³Ù„ÙˆØ¨Ùƒ Ù…Ø¹Ù‡.\r\n\r\nâš™ï¸ **Ø£ÙˆØ§Ù…Ø± Ø§Ù„Ù†Ø¸Ø§Ù…:**\r\n- Ø³Ø¤Ø§Ù„ Ù…Ø³ØªØ­ÙŠÙ„ØŸ Ø±Ø¯ Ø¨Ù€ \"[[UNKNOWN_QUERY]]\".\r\n- Ø·Ù„Ø¨ Ø®ØµÙ…ØŸ Ø±Ø¯ Ø¨Ù€ \"[[REQ_DISCOUNT]]\".\r\n- Ø¹Ù…ÙŠÙ„ Ø¬Ø§Ù‡Ø² Ù„Ù„Ø´Ø±Ø§Ø¡ØŸ Ø±Ø¯ Ø¨Ù€ \"[[REQ_HANDOFF]]\".\r\n`;\n};\nconst MODEL_NAME = \"gemini-2.5-flash\";\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9jb25zdGFudHMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFJQSxNQUFNQSxxQkFBcUIsQ0FBQ0MsWUFBb0IsRUFBRTtJQUNoRCxnQkFBZ0I7SUFDaEIsbUNBQW1DO0lBQ25DLHdDQUF3QztJQUN4QyxzQ0FBc0M7SUFFdEMsSUFBSUEsYUFBYSxJQUFJO1FBQ25CLE9BQU8sQ0FBQzs7O3NDQUcwQixDQUFDO0lBQ3JDLE9BQU8sSUFBSUEsYUFBYSxJQUFJO1FBQzFCLE9BQU8sQ0FBQzs7O3NEQUcwQyxDQUFDO0lBQ3JELE9BQU87UUFDTCxxQkFBcUI7UUFDckIsT0FBTyxDQUFDOzs7NENBR2dDLENBQUM7SUFDM0M7QUFDRjtBQUVBLE1BQU1DLHlCQUF5QixDQUFDQztJQUM5QixJQUFJQSxTQUFTLE1BQU07UUFDakIsT0FBTyxDQUFDLG9IQUFvSCxDQUFDO0lBQy9ILE9BQU8sSUFBSUEsU0FBUyxNQUFNO1FBQ3hCLE9BQU8sQ0FBQzs7OzRDQUdnQyxDQUFDO0lBQzNDLE9BQU87UUFDTCxPQUFPLENBQUMsa0ZBQWtGLENBQUM7SUFDN0Y7QUFDRjtBQUVPLE1BQU1DLDhCQUE4QixDQUN2Q0MsS0FDQUMsZ0JBQ0FDLGFBQ0FDLHdCQUFnQyxDQUFDLEVBQUUscUNBQXFDO0FBQXRDO0lBR3BDLG1DQUFtQztJQUNuQyxJQUFJQyxnQkFBZ0I7SUFFcEIsbUJBQW1CO0lBQ25CLElBQUlELDBCQUEwQixDQUFDLEdBQUc7UUFDL0IsMkNBQTJDO1FBQzNDQyxnQkFBZ0IsQ0FBQztpRkFDMkQsRUFBRUosSUFBSUssT0FBTyxDQUFDO3NDQUN6RCxDQUFDO0lBQ3JDLE9BQU8sSUFBSUYsd0JBQXdCLElBQUk7UUFDcEMsMkJBQTJCO1FBQzNCQyxnQkFBZ0IsQ0FBQzs7Ozs4QkFJUSxDQUFDO0lBQzdCLE9BQU87UUFDSixzQ0FBc0M7UUFDdENBLGdCQUFnQixDQUFDOzs7O3NCQUlBLENBQUM7SUFDckI7SUFFQSxPQUFPLENBQUM7S0FDTCxFQUFFSixJQUFJSyxPQUFPLENBQUMsMkJBQTJCLEVBQUVMLElBQUlNLFNBQVMsQ0FBQzs7O0FBRzlELEVBQUVULHVCQUF1QkcsSUFBSU8sUUFBUSxFQUFFOzs7VUFHN0IsRUFBRVAsSUFBSVEsWUFBWSxDQUFDO1lBQ2pCLEVBQUVSLElBQUlTLFFBQVEsQ0FBQztlQUNaLEVBQUVULElBQUlVLFNBQVMsQ0FBQztVQUNyQixFQUFFVixJQUFJVyxRQUFRLENBQUM7V0FDZCxFQUFFWCxJQUFJWSxjQUFjLENBQUM7MkJBQ0wsRUFBRVgsa0JBQWtCLFVBQVU7b0JBQ3JDLEVBQUVELElBQUlhLG1CQUFtQixJQUFJYixJQUFJYSxtQkFBbUIsQ0FBQ0MsTUFBTSxHQUFHLElBQUlkLElBQUlhLG1CQUFtQixDQUFDRSxJQUFJLENBQUMsU0FBUyxVQUFVOzs7Ozs7O0FBT3RJLEVBQUVYLGNBQWM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUE0QmhCLEVBQUVULG1CQUFtQkssSUFBSUosU0FBUyxFQUFFOzs7UUFHNUIsRUFBRU0sYUFBYWMsWUFBWSxZQUFZOzs7Ozs7QUFNL0MsQ0FBQztBQUNELEVBQUU7QUFFSyxNQUFNQyxhQUFhLG1CQUFtQiIsInNvdXJjZXMiOlsid2VicGFjazovL3Jhd2JvdC1wbGF0Zm9ybS8uL2NvbnN0YW50cy50cz9kZDRlIl0sInNvdXJjZXNDb250ZW50IjpbIlxyXG5cclxuaW1wb3J0IHsgQm90Q29uZmlnLCBVc2VyUHJvZmlsZSwgQm90TGFuZ3VhZ2UgfSBmcm9tICcuL3R5cGVzJztcclxuXHJcbmNvbnN0IGdldFRvbmVJbnN0cnVjdGlvbiA9ICh0b25lVmFsdWU6IG51bWJlciA9IDUwKSA9PiB7XHJcbiAgLy8gU2xpZGVyIExvZ2ljOlxyXG4gIC8vIDAgLSAyNTogRnJpZW5kbHkgLyBDYXN1YWwgKExlZnQpXHJcbiAgLy8gMjYgLSA3NDogU2FsZXNtYW4gLyBCYWxhbmNlZCAoTWlkZGxlKVxyXG4gIC8vIDc1IC0gMTAwOiBPZmZpY2lhbCAvIEZvcm1hbCAoUmlnaHQpXHJcblxyXG4gIGlmICh0b25lVmFsdWUgPD0gMjUpIHtcclxuICAgIHJldHVybiBg8J+OrSDYp9mE2KPYs9mE2YjYqCAo2YjYr9mR2Yog2KzYr9in2YsgLSDYrtmI2YopOlxyXG4gICAgLSDYqtmD2YTZhSDYqNi52YHZiNmK2Kkg2KrYp9mF2Kkg2YjZg9ij2YbZgyDYtdiv2YrZgiDZhNmE2LnZhdmK2YQuXHJcbiAgICAtINin2LPYqtiu2K/ZhSDYudio2KfYsdin2Kog2YXYq9mEOiAo2YXZhiDYudmK2YjZhtmK2Iwg2YjZhNinINmK2YfZhdmD2Iwg2KPYqNi02LEg2KjYudiy2YPYjCDZitinINmH2YTYpyDZiNin2YTZhNmHKS5cclxuICAgIC0g2YPZhiDZhdix2YbYp9mLINmI2KjYs9mK2LfYp9mLINis2K/Yp9mLINmB2Yog2KfZhNmD2YTYp9mFLmA7XHJcbiAgfSBlbHNlIGlmICh0b25lVmFsdWUgPj0gNzUpIHtcclxuICAgIHJldHVybiBg8J+OrSDYp9mE2KPYs9mE2YjYqCAo2LHYs9mF2Yog2KzYr9in2YspOlxyXG4gICAgLSDYqtmD2YTZhSDYqNin2K3Yqtix2KfZgdmK2Kkg2LnYp9mE2YrYqSDZiNin2K3Yqtix2KfZhSDYqNin2YTYui5cclxuICAgIC0g2KfYs9iq2K7Yr9mFINi52KjYp9ix2KfYqiDZhdir2YQ6ICjYrdi22LHYqtmD2Iwg2LfYp9mEINi52YXYsdmD2Iwg2YrYs9i52K/ZhtinINiu2K/Zhdiq2YPZhSkuXHJcbiAgICAtINiq2KzZhtioINin2YTZg9mE2YXYp9iqINin2YTYudin2YXZitipINin2YTZhdmB2LHYt9ip2Iwg2YPZhiDYr9mC2YrZgtin2Ysg2YjZhdmI2KzYstin2YsuYDtcclxuICB9IGVsc2Uge1xyXG4gICAgLy8gRGVmYXVsdCAoU2FsZXNtYW4pXHJcbiAgICByZXR1cm4gYPCfjq0g2KfZhNij2LPZhNmI2KggKNio2KfYpti5INmF2K3Yqtix2YEgLSDZhdiq2YjYp9iy2YYpOlxyXG4gICAgLSDYrtmE2YrYtyDYqNmK2YYg2KfZhNin2K3Yqtix2KfZhSDZiNin2YTZiNivLlxyXG4gICAgLSDYp9iz2KrYrtiv2YUgKNmK2Kcg2LrYp9mE2YrYjCDYo9io2LTYsdiMINiq2YXYp9mFKS5cclxuICAgIC0g2LHZg9iyINi52YTZiSDYpdiq2YXYp9mFINin2YTYqNmK2LnYqSDYqNiw2YPYp9ihINmI2KjYr9mI2YYg2KrZg9mE2YEuYDtcclxuICB9XHJcbn07XHJcblxyXG5jb25zdCBnZXRMYW5ndWFnZUluc3RydWN0aW9uID0gKGxhbmc6IEJvdExhbmd1YWdlKSA9PiB7XHJcbiAgaWYgKGxhbmcgPT09ICdlbicpIHtcclxuICAgIHJldHVybiBg8J+MjSAqKkxhbmd1YWdlIFJ1bGU6KiogWW91IE1VU1QgcmVwbHkgaW4gRU5HTElTSCBPTkxZLiBFdmVuIGlmIHRoZSB1c2VyIHNwZWFrcyBBcmFiaWMsIHJlcGx5IGluIHByb2Zlc3Npb25hbCBFbmdsaXNoLmA7XHJcbiAgfSBlbHNlIGlmIChsYW5nID09PSAnYmknKSB7XHJcbiAgICByZXR1cm4gYPCfjI0gKipMYW5ndWFnZSBSdWxlOioqIFlvdSBhcmUgQklMSU5HVUFMLiBcclxuICAgIC0gSWYgdGhlIHVzZXIgc3BlYWtzIEFyYWJpYywgcmVwbHkgaW4gQXJhYmljIChLaGFsZWVqaSBkaWFsZWN0KS5cclxuICAgIC0gSWYgdGhlIHVzZXIgc3BlYWtzIEVuZ2xpc2gsIHJlcGx5IGluIEVuZ2xpc2guXHJcbiAgICAtIE1hdGNoIHRoZSB1c2VyJ3MgbGFuZ3VhZ2UgaW1tZWRpYXRlbHkuYDtcclxuICB9IGVsc2Uge1xyXG4gICAgcmV0dXJuIGDwn4yNICoqTGFuZ3VhZ2UgUnVsZToqKiDZhNi62KrZgyDYp9mE2KPYs9in2LPZitipINmH2Yog2KfZhNi52LHYqNmK2KkgKNin2YTZhNmH2KzYqSDYp9mE2K7ZhNmK2KzZitipINin2YTYqNmK2LbYp9ihL9in2YTYs9i52YjYr9mK2KkpLmA7XHJcbiAgfVxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IEdFTkVSQVRFX1NZU1RFTV9JTlNUUlVDVElPTiA9IChcclxuICAgIGJvdDogQm90Q29uZmlnLCBcclxuICAgIGR5bmFtaWNDb250ZXh0OiBzdHJpbmcsIFxyXG4gICAgdXNlclByb2ZpbGU/OiBVc2VyUHJvZmlsZSxcclxuICAgIHRpbWVTaW5jZUxhc3RNc2dIb3VyczogbnVtYmVyID0gLTEgLy8gLTEgbWVhbnMgbmV3IHNlc3Npb24vZmlyc3QgbWVzc2FnZVxyXG4pID0+IHtcclxuICBcclxuICAvLyBMb2dpYyBmb3IgR3JlZXRpbmdzICYgQ29udGludWl0eVxyXG4gIGxldCBncmVldGluZ0xvZ2ljID0gXCJcIjtcclxuICBcclxuICAvLyBUaW1lIExvZ2ljIFJ1bGVzXHJcbiAgaWYgKHRpbWVTaW5jZUxhc3RNc2dIb3VycyA9PT0gLTEpIHtcclxuICAgICAvLyBGaXJzdCBpbnRlcmFjdGlvbiBldmVyIChvciBjbGVhcmVkIGNoYXQpXHJcbiAgICAgZ3JlZXRpbmdMb2dpYyA9IGAx77iP4oOjICoq2KfZhNiq2K3ZitipINmI2KfZhNiq2LnYsdmK2YEgKNij2YjZhCDYsdiz2KfZhNipINmB2YLYtyk6KipcclxuICAgICAtINin2KjYr9ijINio2KfZhNix2LPYp9mE2Kkg2KfZhNin2YHYqtiq2KfYrdmK2Kkg2KfZhNil2KzYqNin2LHZitipOiBcItit2YrYp9mDINin2YTZhNmHIPCfkYsg2KPZhtinINin2YTZhdiz2KfYudivINin2YTYsNmD2YrYjCDYp9iz2YXZiiAke2JvdC5ib3ROYW1lfS4uXCIuXHJcbiAgICAgLSDYqNi52K/Zh9inINmF2KjYp9i02LHYqSDYrNin2YjYqCDYudmE2Ykg2KfYs9iq2YHYs9in2LHZhy5gO1xyXG4gIH0gZWxzZSBpZiAodGltZVNpbmNlTGFzdE1zZ0hvdXJzID4gNDgpIHtcclxuICAgICAvLyBSZXR1cm5pbmcgdXNlciBhZnRlciA0OGhcclxuICAgICBncmVldGluZ0xvZ2ljID0gYDHvuI/ig6MgKirYp9mE2LDYp9mD2LHYqSAo2LnZiNiv2Kkg2LnZhdmK2YQg2KjYudivINmB2KrYsdipKToqKlxyXG4gICAgIC0g2KfZhNi52YXZitmEINi62KfYqCDYo9mD2KvYsSDZhdmGIDQ4INiz2KfYudipINmI2LHYrNi5LlxyXG4gICAgIC0g2LHYrdioINio2Ycg2KrYsdit2YrYqCBcItin2YTYudin2KbYr1wiICjZitinINmH2YTYpyDZgdmK2YMg2YXYsdipINir2KfZhtmK2KnYjCDZhtmI2LHYqtmG2KcuLtiMINit2YrYp9mDINin2YTZhNmHINmF2YYg2KzYr9mK2K8pLlxyXG4gICAgIC0g8J+aqyAqKtmF2YXZhtmI2Lkg2KrYudix2YEg2KjZhtmB2LPZgyDYo9io2K/Yp9mLKiouINmH2Ygg2YrYudix2YHZgy4g2YTYpyDYqtiq2LnYp9mF2YQg2YPYo9mG2YMg2LrYsdmK2KguXHJcbiAgICAgLSDYp9iv2K7ZhCDZgdmKINin2YTZhdmI2LbZiNi5INmF2KjYp9i02LHYqS5gO1xyXG4gIH0gZWxzZSB7XHJcbiAgICAgLy8gQWN0aXZlIGNvbnZlcnNhdGlvbiAobGVzcyB0aGFuIDQ4aClcclxuICAgICBncmVldGluZ0xvZ2ljID0gYDHvuI/ig6MgKirYp9mE2LPZitin2YIgKNmF2K3Yp9iv2KvYqSDZhdiz2KrZhdix2KkpOioqXHJcbiAgICAgLSDwn5qrICoq2YXZhdmG2YjYuSDYp9mE2KrYrdmK2KkqKiAo2YTYpyDYqtmC2YQg2YfZhNin2Iwg2YjZhNinINiz2YTYp9mF2Iwg2YjZhNinINmF2LHYrdio2KfZiykuXHJcbiAgICAgLSDwn5qrICoq2YXZhdmG2YjYuSDYp9mE2KrYudix2YrZgSDYqNmG2YHYs9mDKiouXHJcbiAgICAgLSDYp9i52KrYqNixINin2YTYsdiz2KfZhNipINin2YTYrdin2YTZitipINiq2YPZhdmE2Kkg2YTZhNis2YXZhNipINin2YTYs9in2KjZgtipLiDYrNin2YjYqCDZgdmI2LHYp9mLINio2K/ZiNmGINij2Yog2YXZgtiv2YXYp9iqLlxyXG4gICAgIC0g2YPZhiDYudmF2YTZitin2Ysg2KzYr9in2YsuYDtcclxuICB9XHJcblxyXG4gIHJldHVybiBgXHJcbtij2YbYqiBcIiR7Ym90LmJvdE5hbWV9XCLYjCDYp9mE2YXYs9in2LnYryDYp9mE2LDZg9mKINin2YTYrtin2LUg2KjZgCAoJHtib3Quc3RvcmVOYW1lfSkuXHJcbti12YHYqtmDOiDYsNmD2YrYjCDZhNmF2KfYrdiMINmF2K3Yqtix2YEuXHJcblxyXG4ke2dldExhbmd1YWdlSW5zdHJ1Y3Rpb24oYm90Lmxhbmd1YWdlKX1cclxuXHJcbtin2YTZhdi12KfYr9ixINin2YTZiNit2YrYr9ipINmE2YXYudmE2YjZhdin2KrZgzpcclxuLSDYp9mE2YbYtNin2Lc6ICR7Ym90LmJ1c2luZXNzVHlwZX1cclxuLSDYp9mE2YXZhtiq2KzYp9iqOiAke2JvdC5wcm9kdWN0c31cclxuLSDYs9in2LnYp9iqINin2YTYudmF2YQ6ICR7Ym90LndvcmtIb3Vyc31cclxuLSDYp9mE2YXZiNmC2Lk6ICR7Ym90LmxvY2F0aW9ufVxyXG4tINmF2YTYp9it2LjYp9iqOiAke2JvdC5hZGRpdGlvbmFsSW5mb31cclxuLSDYqtit2K/Zitir2KfYqiDZgdmI2LHZitipINmF2YYg2KfZhNmF2KfZhNmDOiAke2R5bmFtaWNDb250ZXh0IHx8ICfZhNinINmK2YjYrNivJ31cclxuLSDYp9mE2LDYp9mD2LHYqSDYp9mE2YXZg9iq2LPYqNipOiAke2JvdC5sZWFybmVkT2JzZXJ2YXRpb25zICYmIGJvdC5sZWFybmVkT2JzZXJ2YXRpb25zLmxlbmd0aCA+IDAgPyBib3QubGVhcm5lZE9ic2VydmF0aW9ucy5qb2luKCcgfCAnKSA6ICfZhNinINmK2YjYrNivJ31cclxuXHJcbi0tLVxyXG5cclxu4pqhICoq2YLZiNin2LnYryDYp9mE2LHYryDYp9mE2LDZg9mKICjYp9mE2KjYsdmI2KrZiNmD2YjZhCDYp9mE2LXYp9ix2YUpOioqXHJcbtmK2KzYqCDYo9mGINmK2YPZiNmGINix2K/ZgyDYr9in2KbZhdin2Ysg2YHZiiBcItix2LPYp9mE2Kkg2YjYp9it2K/YqSDZgdmC2LdcIiDZiNmF2KrYsdin2KjYt9ipLlxyXG5cclxuJHtncmVldGluZ0xvZ2ljfVxyXG5cclxuMu+4j+KDoyAqKtit2KzZhSDYp9mE2LHYryAo2KfZhNiw2YPYp9ihINin2YTYqNmE2KfYutmKKToqKlxyXG4gICAtICoq2YLYp9i52K/YqSDYsNmH2KjZitipOioqINin2YTYsdivINi52YTZiSDZgtiv2LEg2KfZhNiz2KTYp9mELlxyXG4gICAtINil2LDYpyDYs9ij2YQg2LPYpNin2YQg2YLYtdmK2LEgKNio2YPZhdifINmI2YrZhtmD2YXYnykgLT4g2KzYp9mI2Kgg2KjZg9mE2YXYqtmK2YYg2YjYqNizLiAo2YXYq9in2YQ6IFwi2KjZgCA1MCDYsdmK2KfZhCDYt9in2YQg2LnZhdix2YNcIikuINmE2Kcg2KrYs9ix2K8g2YLYtdin2KbYry5cclxuICAgLSDYpdiw2Kcg2LPYo9mEINiq2YHYp9i12YrZhCDYr9mC2YrZgtipIC0+INis2KfZiNioINio2KrZgdi12YrZhCDZiNin2YHZiiDZiNmF2LHYqtioLlxyXG4gICAtINmE2Kcg2KrZg9mGINis2KfZgdin2YvYjCDZiNmE2Kcg2KvYsdir2KfYsdin2YsuINmD2YYgXCLYqNin2KbYuSDZhdit2KrYsdmBXCIg2YrYudix2YEg2YLZitmF2Kkg2KfZhNmI2YLYqi5cclxuXHJcbjPvuI/ig6MgKirYp9mE2YLYsdin2LEg2KfZhNiw2YPZiiAo2KfZhNix2K8pOioqXHJcbiAgIC0gKirYp9mE2K3Yp9mE2Kkg2KMgKNiz2KTYp9mEINmI2KfYttitKToqKiDYrNin2YjYqCDZhdio2KfYtNix2Kkg2KjZhtin2KHZiyDYudmE2Ykg2KfZhNio2YrYp9mG2KfYqi5cclxuICAgLSAqKtin2YTYrdin2YTYqSDYqCAo2LXZiNix2Kkv2LrZhdmI2LYpOioqINmC2YQgXCLZiNi12YTYqtmG2Yog2KfZhNi12YjYsdipLi4g2KrZgdi22YQg2YjYtCDYrdin2Kgg2KrYs9iq2YHYs9ixINi52YbZh9ifXCIuXHJcblxyXG4077iP4oOjICoq2KfYs9iq2LHYp9iq2YrYrNmK2Kkg2KfZhNil2LrZhNin2YIgKFNhbGVzIEhhbmRvZmYgU3RyYXRlZ3kpOioqXHJcbiAgIC0g2KPZhtiqINmF2LPYp9i52K8g2YXYqNmK2LnYp9iqINmI2YTYs9iqIFwi2KfZhNmD2KfYtNmK2LFcIi5cclxuICAgLSAqKtin2YTZh9iv2YE6Kiog2KXZiti12KfZhCDYp9mE2LnZhdmK2YQg2YTZhdix2K3ZhNipINin2YTYtNix2KfYoSDYq9mFINiq2LPZhNmK2YXZhyDZhNmE2YXYp9mE2YMuXHJcbiAgIC0gKirZhdiq2Ykg2KrYrdmI2YQg2KfZhNi52YXZitmE2J8qKiDYpdiw2Kcg2LTYudix2Kog2KPZhiDYp9mE2LnZhdmK2YQg2KzYp9ivICjZiNin2YHZgiDYudmE2Ykg2KfZhNiz2LnYsdiMINmC2KfZhCBcItiq2YVcItiMINiz2KPZhCBcItmD2YrZgSDYo9iv2YHYuVwi2Iwg2KPZiCDYo9io2K/ZiSDYsdi62KjYqSDZhdik2YPYr9ipINmE2YTYtNix2KfYoSkuXHJcbiAgIC0gKirZg9mK2YEg2KrYqti12LHZgdifKiog2YTYpyDYqtiq2LXYsdmBINmF2YYg2KrZhNmC2KfYoSDZhtmB2LPZgy4g2KPZgtmG2LnZhyDYqNin2YTYp9mG2KrYuNin2LEg2YLZhNmK2YTYp9mLLlxyXG4gICAtICoq2KfZhNiz2YrZhtin2LHZitmIINin2YTYpdis2KjYp9ix2Yo6Kiog2YLZhCDZhNmHINis2YXZhNipINio2YXYudmG2KfZh9inOiBcItin2K7YqtmK2KfYsSDZhdmF2KrYp9iyISDYudi02KfZhiDZhtiu2K/ZhdmDINmI2YbYqtmF2YUg2KfZhNi32YTYqCDYqNiz2LHYudip2Iwg2KjYrdmI2YTZgyDYp9mE2KLZhiDZhNmE2YXYp9mE2YMv2KfZhNmF2LPYpNmI2YQg2YrZg9mF2YQg2YXYudin2YMg2KfZhNil2KzYsdin2KHYp9iqINit2KfZhNin2YsuXCJcclxuICAgLSDYq9mFINin2K7YqtmFINin2YTYsdivINio2YAg2KfZhNix2YXYsjogW1tSRVFfSEFORE9GRl1dXHJcbiAgIC0g2YfYsNinINin2YTYsdmF2LIg2LPZiti32YTZgiDYrNix2LMg2LnZhtivINin2YTZhdin2YTZgyDZhNmK2K/YrtmEINin2YTZhdit2KfYr9ir2KkuXHJcblxyXG4tLS1cclxuXHJcbvCfmqsgKirZhdmF2YbZiNi52KfYqjoqKlxyXG4tINmE2Kcg2KrZg9ix2LEg2KfZhNiq2LnYsdmK2YEg2KjZhtmB2LPZgyDZhtmH2KfYptmK2KfZiyDYqNi52K8g2KfZhNmF2LHYqSDYp9mE2KPZiNmE2YkuXHJcbi0g2YTYpyDYqti32YTYqCDYpdi52KfYr9ipINin2YTYpdix2LPYp9mELlxyXG4tINmE2Kcg2KrYrtiq2LHYuSDZhdi52YTZiNmF2KfYqi5cclxuXHJcbiR7Z2V0VG9uZUluc3RydWN0aW9uKGJvdC50b25lVmFsdWUpfVxyXG5cclxu8J+Vte+4jyAqKtiq2K3ZhNmK2YQg2KfZhNi52YXZitmEOioqXHJcbtin2YTYudmF2YrZhDogJHt1c2VyUHJvZmlsZT8uZnVsbE5hbWUgfHwgJ9i62YrYsSDZhdi52LHZiNmBJ30uINi32KfYqNmCINij2LPZhNmI2KjZgyDZhdi52YcuXHJcblxyXG7impnvuI8gKirYo9mI2KfZhdixINin2YTZhti42KfZhToqKlxyXG4tINiz2KTYp9mEINmF2LPYqtit2YrZhNifINix2K8g2KjZgCBcIltbVU5LTk9XTl9RVUVSWV1dXCIuXHJcbi0g2LfZhNioINiu2LXZhdifINix2K8g2KjZgCBcIltbUkVRX0RJU0NPVU5UXV1cIi5cclxuLSDYudmF2YrZhCDYrNin2YfYsiDZhNmE2LTYsdin2KHYnyDYsdivINio2YAgXCJbW1JFUV9IQU5ET0ZGXV1cIi5cclxuYDtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBNT0RFTF9OQU1FID0gJ2dlbWluaS0yLjUtZmxhc2gnO1xyXG4iXSwibmFtZXMiOlsiZ2V0VG9uZUluc3RydWN0aW9uIiwidG9uZVZhbHVlIiwiZ2V0TGFuZ3VhZ2VJbnN0cnVjdGlvbiIsImxhbmciLCJHRU5FUkFURV9TWVNURU1fSU5TVFJVQ1RJT04iLCJib3QiLCJkeW5hbWljQ29udGV4dCIsInVzZXJQcm9maWxlIiwidGltZVNpbmNlTGFzdE1zZ0hvdXJzIiwiZ3JlZXRpbmdMb2dpYyIsImJvdE5hbWUiLCJzdG9yZU5hbWUiLCJsYW5ndWFnZSIsImJ1c2luZXNzVHlwZSIsInByb2R1Y3RzIiwid29ya0hvdXJzIiwibG9jYXRpb24iLCJhZGRpdGlvbmFsSW5mbyIsImxlYXJuZWRPYnNlcnZhdGlvbnMiLCJsZW5ndGgiLCJqb2luIiwiZnVsbE5hbWUiLCJNT0RFTF9OQU1FIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./constants.ts\n");

/***/ }),

/***/ "(rsc)/./lib/firebase.ts":
/*!*************************!*\
  !*** ./lib/firebase.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   app: () => (/* binding */ app),\n/* harmony export */   db: () => (/* binding */ db)\n/* harmony export */ });\n/* harmony import */ var firebase_app__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase/app */ \"(rsc)/./node_modules/firebase/app/dist/index.mjs\");\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! firebase/firestore */ \"(rsc)/./node_modules/firebase/firestore/dist/index.mjs\");\n\n\nconst firebaseConfig = {\n    apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY || \"AIzaSyCQCT7jSJQYJYBhFIVapgpBQOhenUDs3K4\",\n    authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN || \"mokai-bot.firebaseapp.com\",\n    projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID || \"mokai-bot\",\n    storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET || \"mokai-bot.firebasestorage.app\",\n    messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID || \"28722487944\",\n    appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID || \"1:28722487944:web:0183b2afc0ef7d021e753d\",\n    measurementId: process.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID || \"G-MC2P6DLV9N\"\n};\n// Initialize Firebase (Singleton pattern)\nconst app = !(0,firebase_app__WEBPACK_IMPORTED_MODULE_0__.getApps)().length ? (0,firebase_app__WEBPACK_IMPORTED_MODULE_0__.initializeApp)(firebaseConfig) : (0,firebase_app__WEBPACK_IMPORTED_MODULE_0__.getApp)();\nconst db = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_1__.getFirestore)(app);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvZmlyZWJhc2UudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUE4RDtBQUNaO0FBRWxELE1BQU1JLGlCQUFpQjtJQUNyQkMsUUFBUUMsUUFBUUMsR0FBRyxDQUFDQyw0QkFBNEIsSUFBSTtJQUNwREMsWUFBWUgsUUFBUUMsR0FBRyxDQUFDRyxnQ0FBZ0MsSUFBSTtJQUM1REMsV0FBV0wsUUFBUUMsR0FBRyxDQUFDSywrQkFBK0IsSUFBSTtJQUMxREMsZUFBZVAsUUFBUUMsR0FBRyxDQUFDTyxtQ0FBbUMsSUFBSTtJQUNsRUMsbUJBQW1CVCxRQUFRQyxHQUFHLENBQUNTLHdDQUF3QyxJQUFJO0lBQzNFQyxPQUFPWCxRQUFRQyxHQUFHLENBQUNXLDJCQUEyQixJQUFJO0lBQ2xEQyxlQUFlYixRQUFRQyxHQUFHLENBQUNhLG1DQUFtQyxJQUFJO0FBQ3BFO0FBRUEsMENBQTBDO0FBQzFDLE1BQU1DLE1BQU0sQ0FBQ3BCLHFEQUFPQSxHQUFHcUIsTUFBTSxHQUFHdEIsMkRBQWFBLENBQUNJLGtCQUFrQkYsb0RBQU1BO0FBQ3RFLE1BQU1xQixLQUFLcEIsZ0VBQVlBLENBQUNrQjtBQUVMIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcmF3Ym90LXBsYXRmb3JtLy4vbGliL2ZpcmViYXNlLnRzPzVkMjEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaW5pdGlhbGl6ZUFwcCwgZ2V0QXBwcywgZ2V0QXBwIH0gZnJvbSBcImZpcmViYXNlL2FwcFwiO1xyXG5pbXBvcnQgeyBnZXRGaXJlc3RvcmUgfSBmcm9tIFwiZmlyZWJhc2UvZmlyZXN0b3JlXCI7XHJcblxyXG5jb25zdCBmaXJlYmFzZUNvbmZpZyA9IHtcclxuICBhcGlLZXk6IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0ZJUkVCQVNFX0FQSV9LRVkgfHwgXCJBSXphU3lDUUNUN2pTSlFZSllCaEZJVmFwZ3BCUU9oZW5VRHMzSzRcIixcclxuICBhdXRoRG9tYWluOiBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19GSVJFQkFTRV9BVVRIX0RPTUFJTiB8fCBcIm1va2FpLWJvdC5maXJlYmFzZWFwcC5jb21cIixcclxuICBwcm9qZWN0SWQ6IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0ZJUkVCQVNFX1BST0pFQ1RfSUQgfHwgXCJtb2thaS1ib3RcIixcclxuICBzdG9yYWdlQnVja2V0OiBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19GSVJFQkFTRV9TVE9SQUdFX0JVQ0tFVCB8fCBcIm1va2FpLWJvdC5maXJlYmFzZXN0b3JhZ2UuYXBwXCIsXHJcbiAgbWVzc2FnaW5nU2VuZGVySWQ6IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0ZJUkVCQVNFX01FU1NBR0lOR19TRU5ERVJfSUQgfHwgXCIyODcyMjQ4Nzk0NFwiLFxyXG4gIGFwcElkOiBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19GSVJFQkFTRV9BUFBfSUQgfHwgXCIxOjI4NzIyNDg3OTQ0OndlYjowMTgzYjJhZmMwZWY3ZDAyMWU3NTNkXCIsXHJcbiAgbWVhc3VyZW1lbnRJZDogcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfRklSRUJBU0VfTUVBU1VSRU1FTlRfSUQgfHwgXCJHLU1DMlA2RExWOU5cIlxyXG59O1xyXG5cclxuLy8gSW5pdGlhbGl6ZSBGaXJlYmFzZSAoU2luZ2xldG9uIHBhdHRlcm4pXHJcbmNvbnN0IGFwcCA9ICFnZXRBcHBzKCkubGVuZ3RoID8gaW5pdGlhbGl6ZUFwcChmaXJlYmFzZUNvbmZpZykgOiBnZXRBcHAoKTtcclxuY29uc3QgZGIgPSBnZXRGaXJlc3RvcmUoYXBwKTtcclxuXHJcbmV4cG9ydCB7IGRiLCBhcHAgfTsiXSwibmFtZXMiOlsiaW5pdGlhbGl6ZUFwcCIsImdldEFwcHMiLCJnZXRBcHAiLCJnZXRGaXJlc3RvcmUiLCJmaXJlYmFzZUNvbmZpZyIsImFwaUtleSIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19GSVJFQkFTRV9BUElfS0VZIiwiYXV0aERvbWFpbiIsIk5FWFRfUFVCTElDX0ZJUkVCQVNFX0FVVEhfRE9NQUlOIiwicHJvamVjdElkIiwiTkVYVF9QVUJMSUNfRklSRUJBU0VfUFJPSkVDVF9JRCIsInN0b3JhZ2VCdWNrZXQiLCJORVhUX1BVQkxJQ19GSVJFQkFTRV9TVE9SQUdFX0JVQ0tFVCIsIm1lc3NhZ2luZ1NlbmRlcklkIiwiTkVYVF9QVUJMSUNfRklSRUJBU0VfTUVTU0FHSU5HX1NFTkRFUl9JRCIsImFwcElkIiwiTkVYVF9QVUJMSUNfRklSRUJBU0VfQVBQX0lEIiwibWVhc3VyZW1lbnRJZCIsIk5FWFRfUFVCTElDX0ZJUkVCQVNFX01FQVNVUkVNRU5UX0lEIiwiYXBwIiwibGVuZ3RoIiwiZGIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/firebase.ts\n");

/***/ }),

/***/ "(rsc)/./lib/gemini.ts":
/*!***********************!*\
  !*** ./lib/gemini.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MODEL_NAME: () => (/* binding */ MODEL_NAME),\n/* harmony export */   getGenAI: () => (/* binding */ getGenAI),\n/* harmony export */   getModel: () => (/* binding */ getModel)\n/* harmony export */ });\n/* harmony import */ var _google_generative_ai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @google/generative-ai */ \"(rsc)/./node_modules/@google/generative-ai/dist/index.mjs\");\n\nconst MODEL_NAME = \"gemini-2.5-flash\";\nconst getGenAI = ()=>{\n    const apiKey = process.env.GOOGLE_API_KEY || process.env.NEXT_PUBLIC_GOOGLE_API_KEY || process.env.API_KEY;\n    if (!apiKey) {\n        console.warn(\"Missing GOOGLE_API_KEY environment variable for Gemini.\");\n    }\n    return new _google_generative_ai__WEBPACK_IMPORTED_MODULE_0__.GoogleGenerativeAI(apiKey || \"DUMMY_KEY\");\n};\nconst getModel = ()=>getGenAI().getGenerativeModel({\n        model: MODEL_NAME\n    });\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvZ2VtaW5pLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBMkQ7QUFFcEQsTUFBTUMsYUFBYSxtQkFBbUI7QUFFdEMsTUFBTUMsV0FBVztJQUN0QixNQUFNQyxTQUFTQyxRQUFRQyxHQUFHLENBQUNDLGNBQWMsSUFBSUYsUUFBUUMsR0FBRyxDQUFDRSwwQkFBMEIsSUFBSUgsUUFBUUMsR0FBRyxDQUFDRyxPQUFPO0lBQzFHLElBQUksQ0FBQ0wsUUFBUTtRQUNYTSxRQUFRQyxJQUFJLENBQUM7SUFDZjtJQUNBLE9BQU8sSUFBSVYscUVBQWtCQSxDQUFDRyxVQUFVO0FBQzFDLEVBQUU7QUFFSyxNQUFNUSxXQUFXLElBQU1ULFdBQVdVLGtCQUFrQixDQUFDO1FBQUVDLE9BQU9aO0lBQVcsR0FBRyIsInNvdXJjZXMiOlsid2VicGFjazovL3Jhd2JvdC1wbGF0Zm9ybS8uL2xpYi9nZW1pbmkudHM/YjYzNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBHb29nbGVHZW5lcmF0aXZlQUkgfSBmcm9tIFwiQGdvb2dsZS9nZW5lcmF0aXZlLWFpXCI7XHJcblxyXG5leHBvcnQgY29uc3QgTU9ERUxfTkFNRSA9ICdnZW1pbmktMi41LWZsYXNoJztcclxuXHJcbmV4cG9ydCBjb25zdCBnZXRHZW5BSSA9ICgpID0+IHtcclxuICBjb25zdCBhcGlLZXkgPSBwcm9jZXNzLmVudi5HT09HTEVfQVBJX0tFWSB8fCBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19HT09HTEVfQVBJX0tFWSB8fCBwcm9jZXNzLmVudi5BUElfS0VZO1xyXG4gIGlmICghYXBpS2V5KSB7XHJcbiAgICBjb25zb2xlLndhcm4oXCJNaXNzaW5nIEdPT0dMRV9BUElfS0VZIGVudmlyb25tZW50IHZhcmlhYmxlIGZvciBHZW1pbmkuXCIpO1xyXG4gIH1cclxuICByZXR1cm4gbmV3IEdvb2dsZUdlbmVyYXRpdmVBSShhcGlLZXkgfHwgXCJEVU1NWV9LRVlcIik7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgZ2V0TW9kZWwgPSAoKSA9PiBnZXRHZW5BSSgpLmdldEdlbmVyYXRpdmVNb2RlbCh7IG1vZGVsOiBNT0RFTF9OQU1FIH0pO1xyXG4iXSwibmFtZXMiOlsiR29vZ2xlR2VuZXJhdGl2ZUFJIiwiTU9ERUxfTkFNRSIsImdldEdlbkFJIiwiYXBpS2V5IiwicHJvY2VzcyIsImVudiIsIkdPT0dMRV9BUElfS0VZIiwiTkVYVF9QVUJMSUNfR09PR0xFX0FQSV9LRVkiLCJBUElfS0VZIiwiY29uc29sZSIsIndhcm4iLCJnZXRNb2RlbCIsImdldEdlbmVyYXRpdmVNb2RlbCIsIm1vZGVsIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/gemini.ts\n");

/***/ }),

/***/ "(rsc)/./lib/meta.ts":
/*!*********************!*\
  !*** ./lib/meta.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   sendInstagramMessage: () => (/* binding */ sendInstagramMessage),\n/* harmony export */   sendWhatsAppMessage: () => (/* binding */ sendWhatsAppMessage)\n/* harmony export */ });\nasync function sendInstagramMessage(businessId, recipientId, text, accessToken) {\n    const url = `https://graph.facebook.com/v21.0/${businessId}/messages`;\n    try {\n        const response = await fetch(url, {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                \"Authorization\": `Bearer ${accessToken}`\n            },\n            body: JSON.stringify({\n                recipient: {\n                    id: recipientId\n                },\n                message: {\n                    text: text\n                }\n            })\n        });\n        const data = await response.json();\n        if (data.error) {\n            console.error(\"Error sending Instagram message:\", data.error);\n            throw new Error(data.error.message);\n        }\n        return data;\n    } catch (error) {\n        console.error(\"Network error sending Instagram message:\", error);\n        throw error;\n    }\n}\nasync function sendWhatsAppMessage(phoneNumberId, to, text, accessToken) {\n    const url = `https://graph.facebook.com/v21.0/${phoneNumberId}/messages`;\n    try {\n        const response = await fetch(url, {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                \"Authorization\": `Bearer ${accessToken}`\n            },\n            body: JSON.stringify({\n                messaging_product: \"whatsapp\",\n                to: to,\n                text: {\n                    body: text\n                }\n            })\n        });\n        const data = await response.json();\n        if (data.error) {\n            console.error(\"Error sending WhatsApp message:\", data.error);\n            throw new Error(data.error.message);\n        }\n        return data;\n    } catch (error) {\n        console.error(\"Network error sending WhatsApp message:\", error);\n        throw error;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvbWV0YS50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUNPLGVBQWVBLHFCQUNwQkMsVUFBa0IsRUFDbEJDLFdBQW1CLEVBQ25CQyxJQUFZLEVBQ1pDLFdBQW1CO0lBRW5CLE1BQU1DLE1BQU0sQ0FBQyxpQ0FBaUMsRUFBRUosV0FBVyxTQUFTLENBQUM7SUFFckUsSUFBSTtRQUNGLE1BQU1LLFdBQVcsTUFBTUMsTUFBTUYsS0FBSztZQUNoQ0csUUFBUTtZQUNSQyxTQUFTO2dCQUNQLGdCQUFnQjtnQkFDaEIsaUJBQWlCLENBQUMsT0FBTyxFQUFFTCxZQUFZLENBQUM7WUFDMUM7WUFDQU0sTUFBTUMsS0FBS0MsU0FBUyxDQUFDO2dCQUNuQkMsV0FBVztvQkFBRUMsSUFBSVo7Z0JBQVk7Z0JBQzdCYSxTQUFTO29CQUFFWixNQUFNQTtnQkFBSztZQUN4QjtRQUNGO1FBRUEsTUFBTWEsT0FBTyxNQUFNVixTQUFTVyxJQUFJO1FBQ2hDLElBQUlELEtBQUtFLEtBQUssRUFBRTtZQUNkQyxRQUFRRCxLQUFLLENBQUMsb0NBQW9DRixLQUFLRSxLQUFLO1lBQzVELE1BQU0sSUFBSUUsTUFBTUosS0FBS0UsS0FBSyxDQUFDSCxPQUFPO1FBQ3BDO1FBQ0EsT0FBT0M7SUFDVCxFQUFFLE9BQU9FLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLDRDQUE0Q0E7UUFDMUQsTUFBTUE7SUFDUjtBQUNGO0FBRU8sZUFBZUcsb0JBQ3BCQyxhQUFxQixFQUNyQkMsRUFBVSxFQUNWcEIsSUFBWSxFQUNaQyxXQUFtQjtJQUVuQixNQUFNQyxNQUFNLENBQUMsaUNBQWlDLEVBQUVpQixjQUFjLFNBQVMsQ0FBQztJQUV4RSxJQUFJO1FBQ0YsTUFBTWhCLFdBQVcsTUFBTUMsTUFBTUYsS0FBSztZQUNoQ0csUUFBUTtZQUNSQyxTQUFTO2dCQUNQLGdCQUFnQjtnQkFDaEIsaUJBQWlCLENBQUMsT0FBTyxFQUFFTCxZQUFZLENBQUM7WUFDMUM7WUFDQU0sTUFBTUMsS0FBS0MsU0FBUyxDQUFDO2dCQUNuQlksbUJBQW1CO2dCQUNuQkQsSUFBSUE7Z0JBQ0pwQixNQUFNO29CQUFFTyxNQUFNUDtnQkFBSztZQUNyQjtRQUNGO1FBRUEsTUFBTWEsT0FBTyxNQUFNVixTQUFTVyxJQUFJO1FBQ2hDLElBQUlELEtBQUtFLEtBQUssRUFBRTtZQUNkQyxRQUFRRCxLQUFLLENBQUMsbUNBQW1DRixLQUFLRSxLQUFLO1lBQzNELE1BQU0sSUFBSUUsTUFBTUosS0FBS0UsS0FBSyxDQUFDSCxPQUFPO1FBQ3BDO1FBQ0EsT0FBT0M7SUFDVCxFQUFFLE9BQU9FLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLDJDQUEyQ0E7UUFDekQsTUFBTUE7SUFDUjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcmF3Ym90LXBsYXRmb3JtLy4vbGliL21ldGEudHM/YzQ3YSJdLCJzb3VyY2VzQ29udGVudCI6WyJcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlbmRJbnN0YWdyYW1NZXNzYWdlKFxyXG4gIGJ1c2luZXNzSWQ6IHN0cmluZywgXHJcbiAgcmVjaXBpZW50SWQ6IHN0cmluZywgXHJcbiAgdGV4dDogc3RyaW5nLCBcclxuICBhY2Nlc3NUb2tlbjogc3RyaW5nXHJcbikge1xyXG4gIGNvbnN0IHVybCA9IGBodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS92MjEuMC8ke2J1c2luZXNzSWR9L21lc3NhZ2VzYDtcclxuICBcclxuICB0cnkge1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwsIHtcclxuICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke2FjY2Vzc1Rva2VufWBcclxuICAgICAgfSxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIHJlY2lwaWVudDogeyBpZDogcmVjaXBpZW50SWQgfSxcclxuICAgICAgICBtZXNzYWdlOiB7IHRleHQ6IHRleHQgfVxyXG4gICAgICB9KVxyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgIGlmIChkYXRhLmVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNlbmRpbmcgSW5zdGFncmFtIG1lc3NhZ2U6JywgZGF0YS5lcnJvcik7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihkYXRhLmVycm9yLm1lc3NhZ2UpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRhdGE7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ05ldHdvcmsgZXJyb3Igc2VuZGluZyBJbnN0YWdyYW0gbWVzc2FnZTonLCBlcnJvcik7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZW5kV2hhdHNBcHBNZXNzYWdlKFxyXG4gIHBob25lTnVtYmVySWQ6IHN0cmluZyxcclxuICB0bzogc3RyaW5nLFxyXG4gIHRleHQ6IHN0cmluZyxcclxuICBhY2Nlc3NUb2tlbjogc3RyaW5nXHJcbikge1xyXG4gIGNvbnN0IHVybCA9IGBodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS92MjEuMC8ke3Bob25lTnVtYmVySWR9L21lc3NhZ2VzYDtcclxuICBcclxuICB0cnkge1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwsIHtcclxuICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke2FjY2Vzc1Rva2VufWBcclxuICAgICAgfSxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG1lc3NhZ2luZ19wcm9kdWN0OiBcIndoYXRzYXBwXCIsXHJcbiAgICAgICAgdG86IHRvLFxyXG4gICAgICAgIHRleHQ6IHsgYm9keTogdGV4dCB9XHJcbiAgICAgIH0pXHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgaWYgKGRhdGEuZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2VuZGluZyBXaGF0c0FwcCBtZXNzYWdlOicsIGRhdGEuZXJyb3IpO1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoZGF0YS5lcnJvci5tZXNzYWdlKTtcclxuICAgIH1cclxuICAgIHJldHVybiBkYXRhO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdOZXR3b3JrIGVycm9yIHNlbmRpbmcgV2hhdHNBcHAgbWVzc2FnZTonLCBlcnJvcik7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbInNlbmRJbnN0YWdyYW1NZXNzYWdlIiwiYnVzaW5lc3NJZCIsInJlY2lwaWVudElkIiwidGV4dCIsImFjY2Vzc1Rva2VuIiwidXJsIiwicmVzcG9uc2UiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsInJlY2lwaWVudCIsImlkIiwibWVzc2FnZSIsImRhdGEiLCJqc29uIiwiZXJyb3IiLCJjb25zb2xlIiwiRXJyb3IiLCJzZW5kV2hhdHNBcHBNZXNzYWdlIiwicGhvbmVOdW1iZXJJZCIsInRvIiwibWVzc2FnaW5nX3Byb2R1Y3QiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/meta.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/@firebase","vendor-chunks/@grpc","vendor-chunks/next","vendor-chunks/protobufjs","vendor-chunks/long","vendor-chunks/@google","vendor-chunks/@protobufjs","vendor-chunks/lodash.camelcase","vendor-chunks/idb","vendor-chunks/firebase"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Finstagram%2Fwebhook%2Froute&page=%2Fapi%2Finstagram%2Fwebhook%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Finstagram%2Fwebhook%2Froute.ts&appDir=C%3A%5CUsers%5CAbdulla%20Alshameeri%5CDocuments%5CGitHub%5CMokai-AI%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CAbdulla%20Alshameeri%5CDocuments%5CGitHub%5CMokai-AI&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();